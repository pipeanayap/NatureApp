<div class="place-detail-container" *ngIf="!loading && place">
  <!-- Header Section -->
  <div class="header-section">
    <h1>{{ place.name }}</h1>
    <nz-tag [nzColor]="'blue'" class="category-tag">{{ place.category }}</nz-tag>
  </div>

  <!-- Main Content Grid -->
  <div class="content-grid">
    <!-- Left Column -->
    <div class="left-column">
      <!-- Info Card -->
      <div class="info-card">
        <h2>Informaci√≥n General</h2>
        <div class="info-row">
          <span class="label">Descripci√≥n:</span>
          <p>{{ place.description }}</p>
        </div>
        <div class="info-row">
          <span class="label">Latitud:</span>
          <span>{{ place.latitude }}</span>
        </div>
        <div class="info-row">
          <span class="label">Longitud:</span>
          <span>{{ place.longitude }}</span>
        </div>
        <div class="info-row">
          <span class="label">Altitud:</span>
          <span>{{ place.elevationMeters }} metros</span>
        </div>
        <div class="info-row">
          <span class="label">Accesible:</span>
          <nz-tag [nzColor]="place.accessible ? 'green' : 'red'">
            {{ place.accessible ? 'S√≠' : 'No' }}
          </nz-tag>
        </div>
        <div class="info-row">
          <span class="label">Cuota de entrada:</span>
          <span>{{ place.entryFee | currency:'USD':'symbol':'1.0-0' }}</span>
        </div>
        <div class="info-row">
          <span class="label">Horario:</span>
          <span>{{ place.openingHours }}</span>
        </div>
      </div>

      <!-- AI Facts Card -->
      <div class="facts-card">
        <div class="facts-header">
          <h2>ü§ñ Datos Curiosos con IA</h2>
          <button 
            nz-button 
            nzType="primary" 
            (click)="generateFacts()"
            [nzLoading]="loadingFacts"
            [disabled]="loadingFacts">
            <span nz-icon nzType="bulb" nzTheme="outline"></span>
            {{ loadingFacts ? 'Generando...' : 'Generar Datos Curiosos' }}
          </button>
        </div>
        <div class="facts-content" *ngIf="aiResponse && !loadingFacts">
          <div class="fact-item">
            <div class="fact-icon">üí°</div>
            <div class="fact-body">
              <h3>Dato Curioso</h3>
              <p>{{ aiResponse.funFact }}</p>
            </div>
          </div>
          <div class="fact-item">
            <div class="fact-icon">‚ú®</div>
            <div class="fact-body">
              <h3>¬øQu√© lo hace especial?</h3>
              <p>{{ aiResponse.whatsSpecial }}</p>
            </div>
          </div>
          <div class="fact-item">
            <div class="fact-icon">üéØ</div>
            <div class="fact-body">
              <h3>Ideal para</h3>
              <p>{{ aiResponse.bestFor }}</p>
            </div>
          </div>
          <div class="fact-item">
            <div class="fact-icon">üìå</div>
            <div class="fact-body">
              <h3>Debes saber</h3>
              <p>{{ aiResponse.mustKnow }}</p>
            </div>
          </div>
          <div class="fact-item">
            <div class="fact-icon">üíé</div>
            <div class="fact-body">
              <h3>Joya Escondida</h3>
              <p>{{ aiResponse.hiddenGem }}</p>
            </div>
          </div>
        </div>
        <div class="facts-empty" *ngIf="!aiResponse && !loadingFacts">
          <span nz-icon nzType="info-circle" nzTheme="outline"></span>
          <p>Presiona el bot√≥n para generar datos curiosos sobre este lugar usando IA</p>
        </div>
      </div>

      <!-- Photos Gallery -->
      <div class="gallery-card" *ngIf="place.photos && place.photos.length > 0">
        <h2>Galer√≠a de Fotos</h2>
        <div class="photo-grid">
          <div class="photo-item" *ngFor="let photo of place.photos">
            <img [src]="photo.url" [alt]="place.name" />
          </div>
        </div>
      </div>

      <!-- Trails Section -->
      <div class="trails-card" *ngIf="place.trails && place.trails.length > 0">
        <h2>Senderos Disponibles</h2>
        <div class="trails-grid">
          <div class="trail-card" *ngFor="let trail of place.trails">
            <h3>{{ trail.name }}</h3>
            <div class="trail-info">
              <div class="trail-stat">
                <span class="icon">üìè</span>
                <span>{{ trail.distanceKm }} km</span>
              </div>
              <div class="trail-stat">
                <span class="icon">‚è±Ô∏è</span>
                <span>{{ trail.estimatedTimeMinutes }} min</span>
              </div>
              <div class="trail-stat">
                <nz-tag [nzColor]="getDifficultyColor(trail.difficulty)">
                  {{ trail.difficulty }}
                </nz-tag>
              </div>
              <div class="trail-stat">
                <nz-tag [nzColor]="trail.isLoop ? 'purple' : 'cyan'">
                  {{ trail.isLoop ? 'üîÑ Loop' : '‚û°Ô∏è Linear' }}
                </nz-tag>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column - Map -->
    <div class="right-column">
      <div class="map-card">
        <h2>Ubicaci√≥n</h2>
        <div id="detail-map" class="map-container"></div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
  <nz-spin nzSimple [nzSize]="'large'"></nz-spin>
  <p>Cargando detalles del lugar...</p>
</div>
